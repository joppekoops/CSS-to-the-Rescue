*, :before, :after {
	box-sizing: border-box;
/*	outline: 1px solid lime;*/
}

body {
	min-height: 100svh;
	display: grid;
	place-items: center;
	perspective: 100em;
	transform-style: preserve-3d;
	pointer-events: none;
	margin: 0;
	background-image: radial-gradient(ellipse at center, #eff, #9bf);
}

/* the whole mixer */
main {
	background-color: black;
	background-image: linear-gradient(to bottom right, #444, #222);
	padding: 2rem;
	display: grid;
	gap: 2rem;
	transform: translateZ(10em) rotateX(30deg);
	position: relative;
	transform-style: preserve-3d;
}

main:after {
	content: '';
	width: 100%;
	height: 8rem;
	position: absolute;
	bottom: -8rem;
	background-color: #222;
	transform-origin: top center;
	transform: rotateX(-90deg);
}

/* screen */
section:first-of-type {
	aspect-ratio: 16 / 9;
	width: 24rem;
	background: #111;
	container-name: screen;
	container-type: size;
	border-top: 3px solid black;
	border-left: 3px solid black;
	position: relative;
}

section:first-of-type:before {
	display: block;
	content: '';
	width: 100%;
	height: 100%;
	background-image: radial-gradient(ellipse at 30% 30%, #fff3, #fff0);
	position: absolute;
	top: 0;
	left: 0;
}

/* red square in screen */
section:first-of-type div:first-of-type {
	--speed: calc(5s * 9 / 16);
	transform: translateY(calc(50cqh - 50%));
	transition: transform 9000000s linear;

	& div {
		--speed: 5s;
		aspect-ratio: 1;
/*		background: red;*/
		width: 3rem;
		font-size: 3em;
		line-height: 1;

		transform: translateX(calc(50cqw - 50%));
	}
}

/*Animations for moving a graphic*/
@keyframes move-graphic-x {
	0% {
		transform: translateX(calc(0cqw - 0%));
	}

	100% {
		/*move the width of the screen element minus the width of the square*/
		transform: translateX(calc(100cqw - 100%));
	}
}

@keyframes move-graphic-y {
	0% {
		transform: translateY(calc(0cqh - 0%));
	}

	100% {
		/*move the height of the screen element minus the height of the square*/
		transform: translateY(calc(100cqh - 100%));
	}
}

section:nth-of-type(2) {
	transform-style: preserve-3d;
}

/* the joystick */
section:nth-of-type(2) div:nth-of-type(1) {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-template-rows: repeat(3, 1fr);
	aspect-ratio: 1;
	width: 8rem;
	background-color: #fff5;
	background-image: radial-gradient(ellipse at 70% 70%, #999, #000 80%);
	border-radius: 100%;
	user-select: none;
	box-shadow: inset 1px 1px 1px #000;
	transform-style: preserve-3d;
	border: 3px solid #333;
	pointer-events: all;
}

section:nth-of-type(2) div:nth-of-type(1) button {
	border: none;
	background: none;
	pointer-events: all;
}

section:nth-of-type(2) div:nth-of-type(1) div {
	background: #333;
	background-image: radial-gradient(ellipse at 30% 30%, #ccc, #333 80%);
	outline: 1px solid #555;
	border-radius: 100%;
	transition: .2s;
	pointer-events: none;
	display: block;
	width: 100%;
	cursor: pointer;
	box-shadow: 1px 1px 1px #000, 3px 3px 3px #000, 5px 5px 5px #000;
	border: none;
	transform: translateZ(2.5em);
	scale: 1.3;
	transform-style: preserve-3d;
}

/*Top left button*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(1):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {
		transform: translateY(calc(0cqh - 0%));
		transition: transform var(--speed) linear;

		/*X direction animation*/
		& div {
			transform: translateX(calc(0cqw - 0%));
			transition: transform var(--speed) linear;
		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateX(31.5deg) rotateY(-31.5deg) translateZ(2.5em);
	}
}

/*Top center button*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(2):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {
		transform: translateY(calc(0cqh - 0%));
		transition: transform var(--speed) linear;

		/*X direction animation*/
		& div {

		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateX(45deg) translateZ(2.5em);
	}
}

/*Top right button*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(3):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {
		transform: translateY(calc(0cqh - 0%));
		transition: transform var(--speed) linear;

		/*X direction animation*/
		& div {
			transform: translateX(calc(100cqw - 100%));
			transition: transform var(--speed) linear;
		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateX(31.5deg) rotateY(31.5deg) translateZ(2.5em);
	}
}

/*Center left button*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(4):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {

		/*X direction animation*/
		& div {
			transform: translateX(calc(0cqw - 0%));
			transition: transform var(--speed) linear;
		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateY(-45deg) translateZ(2.5em);
	}
}

/*Center right buttton*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(6):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {

		/*X direction animation*/
		& div {
			transform: translateX(calc(100cqw - 100%));
			transition: transform var(--speed) linear;
		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateY(45deg)  translateZ(2.5em);
	}
}

/*Bottom left buttton*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(7):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {
		transform: translateY(calc(100cqh - 100%));
		transition: transform var(--speed) linear;

		/*X direction animation*/
		& div {
			transform: translateX(calc(0cqw - 0%));
			transition: transform var(--speed) linear;
		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateY(-31.5deg) rotateX(-31.5deg) translateZ(2.5em);
	}
}

/*Bottom center button*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(8):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {
		transform: translateY(calc(100cqh - 100%));
		transition: transform var(--speed) linear;

		/*X direction animation*/
		& div {

		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateX(-45deg)  translateZ(2.5em);
	}
}

/*Bottom right button*/
body:has(section:nth-of-type(2) div:nth-of-type(1):active):has(section:nth-of-type(2) div:nth-of-type(1) button:nth-child(9):hover) {

	/*Y direction animation*/
	& section:nth-of-type(1) > div:first-of-type {
		transform: translateY(calc(100cqh - 100%));
		transition: transform var(--speed) linear;

		/*X direction animation*/
		& div {
			transform: translateX(calc(100cqw - 100%));
			transition: transform var(--speed) linear;
		}
	}

	/*Joystick direction*/
	& section:nth-of-type(2) div:nth-of-type(1) div {
		transform: rotateX(-31.5deg) rotateY(31.5deg) translateZ(2.5em);
	}
}